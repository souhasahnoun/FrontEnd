<app-header></app-header>
<div >
    <div class="am-content">
      <div class="page-head">
          <h2> ETATS TRAITES CLIENTS </h2>
    
          <ol class="breadcrumb">
     
            <li class="breadcrumb-item"><a> Etats Bancaires</a></li>
          <li class="breadcrumb-item"><a href="/etattraitesclient">Etat des traites client</a></li>
          </ol>
        </div>
        <div class="main-content">
            <div class="row">
                <div class="col-md-6">
                    <div class="card3">
                    <div class="card-header">
                      <h3>Chercher </h3>
                    </div>
                    <div class="card-body">
                      <form role="form" data-parsley-validate="" novalidate="">
                        <div class="form-group radio02 "> 
                          <label for="client">Client</label>
                          <select  id="client" name="client" class="form-control label7" size="1" (change)="onSelectType($event.target)" [(ngModel)]="reglementclt.client" #client="ngModel" required>
                  
                            <option
                              
                              *ngFor="let client of clients.controls; index as i"
                              [value]="client.value.raison_social">{{client.value.raison_social}}
                          </option>
                          </select>                         
                        </div>
                        <div class="form-group ">
                          <label for="date">Date début</label>
                            <input class="form-control1 label7"  type="date" required  id="date" name="date" [(ngModel)]="reglementclt.date" #date="ngModel">
                        </div>
                        <div class="form-group ">
                          <label for="date_echeance">Date fin</label>
                            <input class="form-control1 label7"  type="date" required [(ngModel)]="reglementclt.date_echeance"  #date_echeance="ngModel">
                        </div>
                        <div class="form-group "> 
                          <label for="type_date">Date</label><select class="form-control1 label3" name="type_date" (change)="onSelectType($event.target)" required [(ngModel)]="reglementclt.type_date"  #type_date="ngModel">
                            <option value="Date Echéance">Date Echéance</option>
                            <option value="Date Reception">Date Reception</option>
                          </select>
                        </div><br>
                          
                        <!--<div class="form-group radio02 "> 
                          <label for="source">Source</label><select class="form-control1 label7"  required [(ngModel)]="lignebordereau.source">
                            
                            <option value="Ticket">Ticket</option>
                            <option value="Bon de livraison">Bon de livraison</option>
                            <option value="Facture">Facture</option>
                          </select>
                        </div>-->
                        <div class="form-group radio02 "> 
                          <label for="type_traite">Type de Traite</label><select class="form-control1 label7"  required [(ngModel)]="reglementclt.type_traite" #type_traite="ngModel">
                            
                            <option value="Traite Bancaire">Traite Bancaire</option>
                            <option value="Traite Manuelle">Traite Manuelle</option>
                          </select>
                          </div>
                          <div class="form-group "> 
                            <label for="etat_traite">Etat du traite</label><select class="form-control1 label7"  required [(ngModel)]="reglementclt.etat_traite" #etat_traite="ngModel">
                             
                              <option value="Soldé">Soldé</option>
                              <option value="Non soldé">Non soldé</option>
                              <option value="Impayé">Impayé</option>
                              <option value="Préavis">Préavis</option>
                            </select>
                            </div>
                 <button class="b8 btn btn-space btn-primary"  type="submit" (click)="search()">Chercher</button>
                 <button class="btn btn-space btn-primary"  type="submit"  (click)="reset()">Reset</button>
                      </form>
                    </div>
                  </div>
                <br>
                
                 <div class="card3">
                 <div class="card-header">
                     <h3>Liste des etats des traites clients
                        <a routerLink="/imprimeretattraitec/{{reglementclt.id}}{{lignebordereau.source}}
                        {{reglementclt.date}}{{reglementclt.date_echeance}}{{reglementclt.type_date}}{{reglementclt.type_traite}}
                        {{reglementclt.etat_traite}}" 
                         target="_blanc" class="img4 s7-print" title="imprimer"></a>
                     </h3>
                 </div>
                 <br>
                 <div class="form-group radio1"> 
                 <label  for="banque" class="f1">Banque: </label>
                 <select  id="banque" name="banque" class="f1 form-control label7 radio0000 " size="1" (change)="onSelectType($event.target)" [(ngModel)]="reglementclt.banque" #banque="ngModel" required>
                   
                   <option
                     
                     *ngFor="let banque of banques.controls; index as i"
                     [value]="banque.value.libelle">{{banque.value.libelle}}
                 </option>
                 </select>
                  
                  

                  <a routerLink="/imprimeretattraitec1/{{reglementclt.banque}}" target="_blanc" class="b1 btn btn-space btn-primary"  >Imprimer Bordereau</a>
                  </div>
                          <table class=" t2 table-sm  table-bordered ">
                              <thead class="thead1">
                        
                              <tr>
                                  
                                
                                <th>Num traite</th>
                                <th>Banque </th>
                                <th >Client</th>
                               
                                <th >Date Réception</th>
                                <th >Date Echéance</th>
                               <th>Utilisateur</th>
                               <th>Montant</th>
                               <th>Soldé</th>
                               <th>Non Soldé</th>
                               <th>Etat</th>
                              
                
                              </tr>
                            </thead>
                            <tbody *ngFor="let reglementclt of reglementclts">
                                <tr >
                                 
                                    <td *ngIf="reglementclt.mode =='traite'">{{reglementclt.num}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'"> {{reglementclt.banque}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'">{{reglementclt.client}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'">{{reglementclt.date}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'">{{reglementclt.date_echeance}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'">{{lignebordereau.login}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'">{{reglementclt.montant}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'">{{reglementclt.solder}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'">{{reglementclt.non_solder}}</td>
                                    <td *ngIf="reglementclt.mode =='traite'">{{reglementclt.etat}}</td>
            
                                </tr>
                           
                             
                                  
                              </tbody>
                              <tfoot>
                                <tr class="thead1">
                              
                                  <td colspan="7" ><b>Total</b></td>
                                  
                                  <td class="d">0.000 dt</td>
                                  <td class="td2">0.000 dt</td>
                                  <td class="td3">0.000 dt</td>
                               
                        
                        
                                  
                              
                                   
                                    <td >
                                      </td>
              
                                </tr>
                              </tfoot>
                          </table>
                          <br>
                          <nav aria-label="Page navigation example" class="radio45">
                            <ul class="pagination " *ngIf="pager.pages && pager.pages.length">
                              <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                                <a class="page-link" (click)="setPage(1)">First</a>
                              </li>
                              <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                                <a class="page-link" (click)="setPage(pager.currentPage - 1)">Previous</a>
                              </li>
                              <li class="page-item"  *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
                                <a class="page-link" (click)="setPage(page)">{{page}}</a>
                              </li>
                              <li class="page-item"  [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                                <a class="page-link" (click)="setPage(pager.currentPage + 1)">Next</a>
                              </li>
                              <li class="page-item"  [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                                <a class="page-link" (click)="setPage(pager.totalPages)">Last</a>
                              </li>
                            </ul>
                          </nav>
                          </div>
                      </div>
                      </div>
       
          
  
  